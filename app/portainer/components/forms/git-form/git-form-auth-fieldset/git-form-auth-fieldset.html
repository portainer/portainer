<div class="form-group">
  <div class="col-sm-12">
    <por-switch-field
      ng-model="$ctrl.model.RepositoryAuthentication"
      label="Authentication"
      name="authSwitch"
      on-change="($ctrl.onChangeAuth)"
      data-cy="component-gitAuthToggle"
    ></por-switch-field>
  </div>
</div>
<div class="small text-warning" style="margin: 5px 0 15px 0;" ng-if="$ctrl.model.RepositoryAuthentication && $ctrl.showAuthExplanation">
  <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
  <span class="text-muted">Enabling authentication will store the credentials and it is advisable to use a git service account</span>
</div>
<div ng-if="$ctrl.model.RepositoryAuthentication">
  <div class="form-group">
    <label for="repository_username" class="col-sm-2 control-label text-left">Username</label>
    <div class="col-sm-3">
      <input
        type="text"
        class="form-control"
        ng-model="$ctrl.model.RepositoryUsername"
        name="repository_username"
        placeholder="git username"
        ng-change="$ctrl.onChangeUsername($ctrl.model.RepositoryUsername)"
        data-cy="component-gitUsernameInput"
        ng-required="$ctrl.model.RepositoryAuthentication"
      />
    </div>
  </div>
  <div class="form-group">
    <label for="repository_password" class="col-sm-2 control-label text-left">
      Personal Access Token
      <portainer-tooltip position="bottom" message="Provide a personal access token or password"></portainer-tooltip>
    </label>
    <div class="col-sm-3">
      <input
        type="password"
        class="form-control"
        ng-model="$ctrl.model.RepositoryPassword"
        name="repository_password"
        placeholder="personal access token"
        ng-change="$ctrl.onChangePassword($ctrl.model.RepositoryPassword)"
        ng-required="!$ctrl.isEdit"
        data-cy="component-gitPasswordInput"
      />
    </div>
  </div>
</div>

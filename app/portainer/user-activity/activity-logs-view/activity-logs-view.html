<rd-header>
  <rd-header-title title-text="User Activity">
    <a data-toggle="tooltip" title="Refresh" ui-sref="." ui-sref-opts="{reload: true}">
      <i class="fa fa-sync" aria-hidden="true"></i>
    </a>
  </rd-header-title>
  <rd-header-content>Activity Logs</rd-header-content>
</rd-header>

<div class="row">
  <div class="col-sm-12">
    <rd-widget>
      <rd-widget-body>
        <div class="form-horizontal">
          <div class="form-group">
            <label for="dateRangeInput" class="col-sm-2 control-label text-left">Date Range</label>
            <div class="col-sm-6">
              <date-range-picker
                id="dateRangeInput"
                class-name="form-control"
                start-date="$ctrl.state.date.from"
                end-date="$ctrl.state.date.to"
                max-date="$ctrl.today"
                min-date="$ctrl.minValidDate"
                on-change="($ctrl.onChangeDate)"
              ></date-range-picker>
            </div>
          </div>
        </div>

        <p class="text-muted small">
          <i class="fa fa-info-circle blue-icon space-right" aria-hidden="true"></i>
          Portainer user activity logs have a maximum retention of 7 days.
        </p>

        <div>
          <button type="button" class="btn btn-sm btn-primary" ng-click="$ctrl.export()"> <i class="fa fa-download space-right" aria-hidden="true"></i>Export as CSV </button>
        </div>
      </rd-widget-body>
    </rd-widget>

    <activity-logs-datatable
      logs="$ctrl.state.logs"
      keyword="$ctrl.state.keyword"
      sort="$ctrl.state.sort"
      limit="$ctrl.state.limit"
      context-filter="$ctrl.state.contextFilter"
      total-items="$ctrl.state.totalItems"
      current-page="$ctrl.state.currentPage"
      on-change-keyword="($ctrl.onChangeKeyword)"
      on-change-sort="($ctrl.onChangeSort)"
      on-change-limit="($ctrl.onChangeLimit)"
      on-change-page="($ctrl.onChangePage)"
    ></activity-logs-datatable>
  </div>
</div>
